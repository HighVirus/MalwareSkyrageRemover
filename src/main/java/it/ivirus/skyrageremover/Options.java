package it.ivirus.skyrageremover;

import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Scanner;

import lombok.Value;

@Value
public class Options {

	boolean cleanSystem;
	boolean cleanJars;
	boolean replaceJars;

	public static Options readOptions() throws IOException {
		Scanner scanner = new Scanner(new InputStreamReader(System.in));
		boolean cleanSystem = readOption(scanner, "Clean system");
		boolean cleanJars = readOption(scanner, "Clean jars");
		boolean replaceJars = readOption(scanner, "Replace jars");
		scanner.close();
		return new Options(cleanSystem, cleanJars, replaceJars);
	}
	
	private static boolean readOption(Scanner scanner, String option) throws IOException {
		System.out.print(option + "? [y/n] ");
		String answer = scanner.nextLine();
		if (answer.equalsIgnoreCase("y")) {
			return true;
		} else if (answer.equalsIgnoreCase("n")) {
			return false;
		} else {
			System.out.println("Invalid answer!");
			return readOption(scanner, option);
		}
	}
}
